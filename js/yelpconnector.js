var yelpConnector=function(){function t(t){c=[],o=0;var e={url:"https://api.yelp.com/v2/search",method:"GET",data:{callback:"cb",category_filter:"restaurants,cafes,bars,diners",radius_filter:300,ll:t.lat()+","+t.lng()}};return i(e)}function e(t,e,a){console.log("using yelp"),c=[],o=0;var r={url:"https://api.yelp.com/v2/search",method:"GET",data:{callback:"cb",category_filter:"restaurants,cafes,bars,diners",term:t,location:e,radius_filter:300,limit:1}};i(r,a)}var a=OAuth({consumer:{"public":"C-4GDCnkh-Dxhk6pWNoscw",secret:"65MBaRTfFXAejPbc_dUhv1q8cTQ"},signature_method:"HMAC-SHA1"}),r={"public":"wDH7ic6093-SbTXCOpwe7gPh7AS6J993",secret:"tmQwFSFiYwRu8Ta4a4NYFtNUUQ8"},c=[],o=0,n=20,i=function(t,e){$.ajax({url:t.url,type:t.method,dataType:"jsonp",cache:!0,data:a.authorize(t,r)}).done(function(a){return c=c.concat(a.businesses),a.total>o+n?(o+=n,t.data.offset=o,void i(t)):void("function"==typeof e&&e(c))}).fail(function(t,e,a){console.log("Failed to load: "+e+", "+a)})};return{fetchDinersFromYelp:t,fetchDinerDetailsFromYelp:e}}();