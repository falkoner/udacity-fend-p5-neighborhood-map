var yelpConnector=function(){function t(t){o=[],r=0;var e={url:"https://api.yelp.com/v2/search",method:"GET",data:{callback:"cb",category_filter:"restaurants,cafes,bars,diners",radius_filter:300,ll:t.lat()+","+t.lng()}};i(e)}function e(t,e,a){console.log("using yelp"),o=[],r=0;var c={url:"https://api.yelp.com/v2/search",method:"GET",data:{callback:"cb",category_filter:"restaurants,cafes,bars,diners",term:t,location:e,radius_filter:300,limit:1}};i(c,a)}var a=OAuth({consumer:{"public":"C-4GDCnkh-Dxhk6pWNoscw",secret:"65MBaRTfFXAejPbc_dUhv1q8cTQ"},signature_method:"HMAC-SHA1"}),c={"public":"wDH7ic6093-SbTXCOpwe7gPh7AS6J993",secret:"tmQwFSFiYwRu8Ta4a4NYFtNUUQ8"},o=[],r=0,n=20,i=function(t,e){$.ajax({url:t.url,type:t.method,dataType:"jsonp",cache:!0,data:a.authorize(t,c)}).done(function(a){return o=o.concat(a.businesses),a.total>r+n?(r+=n,t.data.offset=r,void i(t,e)):void 0}).fail(function(t,e,a){console.log("Failed to load: "+e+", "+a)}).always(function(){"function"==typeof e&&e(o)})};return{fetchDinersFromYelp:t,fetchDinerDetailsFromYelp:e}}();